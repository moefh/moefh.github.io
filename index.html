<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Freeing the Magic Smoke</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Freeing the Magic Smoke">
<meta property="og:url" content="http://moefh.gihub.io/index.html">
<meta property="og:site_name" content="Freeing the Magic Smoke">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="MoeFH">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Freeing the Magic Smoke" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Freeing the Magic Smoke</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moefh.gihub.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Homemade-ESP32-VGA-Boards" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/02/Homemade-ESP32-VGA-Boards/" class="article-date">
  <time class="dt-published" datetime="2021-04-02T03:33:36.000Z" itemprop="datePublished">2021-04-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/02/Homemade-ESP32-VGA-Boards/">Homemade ESP32 VGA Boards</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>To start experimenting with the networking code of the <a href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/" title="ESP32 game engine">ESP32 game engine</a>, I made
a new board for the ESP32 so I can have two of them running the game
and talking to each other.  The new board was supposed to be just a
copy of the original one, but I discovered a silly mistake I made in
the original wiring: the red-high and red-low wires were reversed.
This caused quite a mess in the colors, I’m surprised I didn’t notice
it before:</p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/cmp-1.jpg" alt="Comparison showing that the old board has wrong red levels"></p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/cmp-2.jpg" alt="Zoom in the &quot;P&quot;"></p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/cmp-3.jpg" alt="Bridge and torch"></p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/cmp-4.jpg" alt="Zoom in the torch"></p>
<p>The “new dac” label refers to the fixed DACs I wrote about in the <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/" title="last post">last post</a>. I’m
not sure I can see any difference between the old an new DACs, to be
honest (my phone camera doesn’t help – its automatic color balance
messes up the colors way more than my DACs, apparently).</p>
<p>In any case, it’s easy to see the difference between the old and new
boards. Not only the new board’s images have a blue-greenish tint
overall (less red), we can also see that the red gradient in the “P”
is clearly fixed – what should be <code>black</code>-&gt;<code>dark red</code>-&gt;<code>medium red</code>-&gt;<code>bright red</code> was wrongly shown as <code>black</code>-&gt;<code>medium red</code>-&gt;<code>dark red</code>-&gt;<code>bright red</code>, which is happens when the low and high bits of the
red component are swapped:</p>
<table>
<thead>
<tr>
<th></th>
<th>correct gradient</th>
<th>swapped first and second bits</th>
</tr>
</thead>
<tbody><tr>
<td>binary</td>
<td>00 01 10 11</td>
<td>00 10 01 11</td>
</tr>
<tr>
<td>decimal</td>
<td>0  1  2  3</td>
<td>0  2  1  3</td>
</tr>
</tbody></table>
<p>Of course, since we can select the ESP32 output pins any way we want,
it’s easy to fix this in software by simply changing the pin
assignments in the <code>pin_config</code> array in <code>vga_game.ino</code>: just swap
<code>PIN_RED_LOW</code> and <code>PIN_RED_HIGH</code>. That’s good news for me because I
don’t feel like making a third board right now.</p>
<p>And finally, just for reference, here are all of the homemade boards
I’m using in this project:</p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/new_board.jpg" alt="New board"></p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/old_board.jpg" alt="Old board (notice that the red wires don&#39;t cross, unlike the blue and green ones)"></p>
<p><img src="/2021/04/02/Homemade-ESP32-VGA-Boards/dacs.jpg" alt="DACs"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/04/02/Homemade-ESP32-VGA-Boards/" data-id="ckmzi1kdw0002m1yqbiib0mgb" data-title="Homemade ESP32 VGA Boards" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/perfboard/" rel="tag">perfboard</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Porting-Loser-Corps-to-the-ESP32-Part-3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/" class="article-date">
  <time class="dt-published" datetime="2021-03-27T19:11:51.000Z" itemprop="datePublished">2021-03-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/">Porting Loser Corps to the ESP32 - Part 3</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>More progress in porting Loser Corps to the ESP32 (<a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" title="here&#39;s part 1">here&#39;s part 1</a> of the saga).</p>
<p>Even though there’s nothing <em>really</em> exciting to report, this is a
very long post because there’s a lot of small changes:</p>
<ul>
<li>Wiimote support</li>
<li>New VGA DACs</li>
<li>Rewriting the VGA output code</li>
<li>New font</li>
</ul>
<h2 id="Wiimote-Support"><a href="#Wiimote-Support" class="headerlink" title="Wiimote Support"></a>Wiimote Support</h2><p>The game now supports the Wiimote controller (via Bluetooth) using
takeru’s <a target="_blank" rel="noopener" href="https://github.com/takeru/Wiimote">Wiimote</a> library. I had
to make a very small change to use it: I added a <code>void *</code> parameter to
the callback function, so it can update the state of the controller
object without forcing it to refer to the global binding.</p>
<p>The library works perfectly, the only slightly annoying thing is that
I haven’t figured out how to permanently pair the controller with the
ESP32, so every time the ESP32 restarts you have to press the Wiimote
buttons 1 and 2 at the same time to make the Bluetooth connection. Not
a big deal, but it could be better.</p>
<h2 id="New-VGA-DACs"><a href="#New-VGA-DACs" class="headerlink" title="New VGA DACs"></a>New VGA DACs</h2><p>I made a new VGA connector with new digital-to-analog converters
(DACs). The old ones are slightly wonky because I didn’t have
resistors with good values when I made it, so I finally got some new
resistors and made a new one:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/new-dac.jpg" alt="New VGA connector with DACs"></p>
<p>For comparison, here’s the old one:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/old-dac.jpg" alt="Old VGA connector with DACs"></p>
<p>To see why the new DACs are better than the old ones, we have to talk
about how the VGA color signal is generated.  The monitor wants to
receive each color component (Red, Green, Blue) in their own wire,
with a voltage between 0V and 0.7V indicating its intensity.  To
produce an image, the voltage has to be changed as the monitor sweeps
the screen to draw the pixels: each pixel is drawn with the RGB
intensity corresponding to the voltage of the red, green and blue
wires at the time it’s being drawn.</p>
<p>The ESP32 only has 2 internal DAC outputs, so we can’t use them to
create the 3 voltages we need for the RGB wires (even if it had 3, its
DACs aren’t fast enough to generate the signal we need at over
12MHz).  So we make the ESP32 output each color component as multiple
digital pins: in our case, we use 2 pins per component. Since a
digital pin has two logical values (0 and 1), each component has 4
possible combinations (00, 01, 10, 11), and the DAC has to convert
these to 4 voltages between 0V and 0.7V. Ideally, we’d like to map
them like this:</p>
<table>
<thead>
<tr>
<th>pin values (from ESP32)</th>
<th>intensity</th>
<th>output voltage (to VGA monitor)</th>
</tr>
</thead>
<tbody><tr>
<td>00</td>
<td>0%</td>
<td>0V</td>
</tr>
<tr>
<td>01</td>
<td>33%</td>
<td>0.23V</td>
</tr>
<tr>
<td>10</td>
<td>67%</td>
<td>0.47V</td>
</tr>
<tr>
<td>11</td>
<td>100%</td>
<td>0.7V</td>
</tr>
</tbody></table>
<p>The ESP32 output pins give 3.3V when high (logical 1) and 0V when low
(logical 0), so we can build a small circuit connecting them to
resistors to generate the desired output voltages:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/dac-schematic.png" alt="DAC schematic (for each color component)"></p>
<p>That’s the DAC. We just have to choose values for R1 and R2 so that
when Pin1 and Pin2 are high/low we have the desired voltage in output
as shown in the table above. (By the way, the 75Ω resistor is there
for impedance matching with the monitor – I don’t think it’s really
right, but I don’t know how to match the impedance properly).</p>
<p>The old DAC had resistor values of 1KΩ and 560Ω, which is what I had
available at the time. The new DAC has 1KΩ and 470Ω, which outputs
voltages closer to what we want:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/dac-graph.png" alt="DAC output voltages (dotted lines show theoretical best)"></p>
<p>The dotted lines show the theoretical best values for each pin value
except for <code>00</code>, which has the trivial-to-generate voltage level of
0V.  The new DAC is overall closer to the theoretical best, but most
importantly, it has more consistent spacing between the levels, while
the old DAC has the interval between 01 and 10 smaller then the other
ones.</p>
<p>I’m not sure the image result is that different, but for the record
here’s a photo of the game running with the new DACs:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/screen.jpg" alt="Game screen with the new DACs"></p>
<h2 id="Rewriting-the-VGA-Output-Code"><a href="#Rewriting-the-VGA-Output-Code" class="headerlink" title="Rewriting the VGA Output Code"></a>Rewriting the VGA Output Code</h2><p>I ended up rewriting the VGA output code. I was using bitluni’s
excellent <a target="_blank" rel="noopener" href="https://github.com/bitluni/ESP32Lib">ESP32Lib</a>, but that
library does a lot of stuff we don’t need. That makes the code larger
and also more complicated: when reading the code, I had trouble
following exactly how things are done with the code written in C++
with multiple inheritance.</p>
<p>So to make sure I understood every detail, I ended up rewriting the
code in plain C style. My code supports only double-buffered output,
and changing the resolution requires altering the appropriate
constants by hand (I might make it easier to change it if I end up
using this code for something else).  It also doesn’t have any drawing
API, all drawing must be done by writing directly to the framebuffer
– which suits the game just fine, because I was already doing that
with ESP32Lib.</p>
<p>My only improvement over ESP32Lib was making the I2S system trigger an
interrupt at the end of each frame (the interrupy simply increments a
frame counter). With that, the main game loop can now wait for the end
of the frame to swap the framebuffers and start drawing again
(basically a vsync). That removes the annoying horizontal line from
the screen which happens when the image is updated while it’s being
drawn, and also forces a constant framerate (that’s why that photo
above shows 60fps).</p>
<p>It’s still possible to disable the vsync (returning to the old
variable framerate and annoying horizontal line), which I do
occasionally to check the performance of the game.</p>
<h2 id="New-Font"><a href="#New-Font" class="headerlink" title="New Font"></a>New Font</h2><p>Since I’m not using ESP32Lib anymore, I had to make my own font and
font-rendering code (which is pretty unoptimized, but for now it
doesn’t matter since I’m only using text for debugging).  I used
<a target="_blank" rel="noopener" href="https://krita.org/en/">Krita</a> to draw the font because it’s easier to
draw pixel-by-pixel with it than with Gimp.</p>
<p>Here’s an image of the 6x8 font:</p>
<p><img src="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/font.png" alt="The new font"></p>
<p>(The yellow/greenish background is what I used when drawing the font.)</p>
<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>I’m not sure what I’ll do next: probably either sound or network. For
network, I haven’t even decided if I’ll use ESP32’s “ESP-NOW” protocol
or normal WiFi/IP, but it will be fun to investigate the pros and cons
of each one.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/" data-id="ckmzi1keb0005m1yqckcpdhk4" data-title="Porting Loser Corps to the ESP32 - Part 3" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wiimote/" rel="tag">wiimote</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Porting-Loser-Corps-to-the-ESP32-Part-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/" class="article-date">
  <time class="dt-published" datetime="2021-03-07T20:02:26.000Z" itemprop="datePublished">2021-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/">Porting Loser Corps to the ESP32 - Part 2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I made some progress in porting Loser Corps to the ESP32 (<a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" title="here&#39;s part 1">here&#39;s part 1</a> of the saga).</p>
<p>Here’s a demo video (click to open Youtube):</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=BvJ3HLKo6p4"><img src="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser1.jpg" alt="Youtube video"></a></p>
<p>(This video shows a slightly older version where collision detection
was done with the image rectangle, not the character’s clipping
rectangle, which is why it looks a little wonky in a few places.)</p>
<p>As the video shows, you control a character in a map, walking and
jumping around.  I reworked some parts of the movement code, but it
feels a lot like the original, although I think the jump is not high
enough.  The collision detection is pretty much untouched, except for
what I absolutely had to do to make it run in the ESP32, which wasn’t
much.</p>
<p>The joystick I’m using is a common Arduino joystick shield.  It’s
pretty cheap and easy to use, but it requires one input pin of the
ESP32 for each button, and one analog input pin for each direction of
the stick – it’s really just a bunch of of buttons and potentiometers
conveniently placed on a PCB:</p>
<p><img src="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser3.jpg" alt="The Arduino joystick shield I&#39;m using"></p>
<p>I’ve connected all buttons pins, but the code only uses the C button
to jump and the X analog stick to move.</p>
<p>I’ve tried to use a Wiimote nunchuck and a Wiimote classic controller,
but I didn’t have much success.  These controllers use an I2C
interface to talk to the Wiimote, so it seems like they should be easy
to use with the ESP32 – and it actually works, but it’s very
unreliable.  The controller stops replying for no apparent reason, a
lot of times requiring an unplug/re-plug to start working again.  I’ve
tried it with no pullup resistors, 4.7K pullups, 10K pullups, all for
nothing.  The strangest thing is that it works perfectly with an
Arduino Uno (using the same exact test code), even with no pullup
resistors.  I say people saying that the I2C part of the ESP32 Arduino
library isn’t that great, so maybe that’s the problem?</p>
<p>Another nice option would be to use the Wiimote itself, which uses
Bluetooth.  That’s probably the next thing I’ll work on in this
project.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/" data-id="ckmzi1ke70004m1yqhmebc1dm" data-title="Porting Loser Corps to the ESP32 - Part 2" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/joystick/" rel="tag">joystick</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Porting-Loser-Corps-to-the-ESP32" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" class="article-date">
  <time class="dt-published" datetime="2021-02-28T18:17:35.000Z" itemprop="datePublished">2021-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/">Porting Loser Corps to the ESP32</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I started porting <a target="_blank" rel="noopener" href="https://github.com/moefh/loser-corps">Loser Corps</a>,
a video game I and a few friends made in the old days of 1998-1999, to
the ESP32.</p>
<p>I’m using bitluni’s <a target="_blank" rel="noopener" href="https://github.com/bitluni/ESP32Lib">ESP32Lib</a> to
generate the VGA output, and I’m still using my crappy homemade DAC
with 2 bits per color component I showed in the <a href="/2021/02/21/ESP32-VGA-output/" title="last post">last post</a>.  The only addition is a little board I
made to connect the pins from the ESP32 devkit to the VGA breakout
board without the mess I had in the breadboard, and an improvised
cardboard box to hold the VGA plug in place (it works surprisingly
well).  I’ll probably make a nicer board and box when I add joystick
input and sound output.</p>
<p>The code currently renders a static screen with the background filled
with tiles, some sprites and some foreground tiles. It’s probably a
reasonable test of how fast things will render:</p>
<p><img src="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/setup.jpg" alt="The whole setup"></p>
<p>The game images look a little rough when converted to 64 colors,
especially since the palette is fixed by the hardware, but I think I
can get used to it:</p>
<p><img src="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/screenshot.jpg" alt="Screenshot of the game"></p>
<p>I managed to get a descent render speed after I started writing to the
screen 4 pixels at a time. The annoying thing about this whole thing
is that because of the way the ESP32 I2S DMA works, the data in the
framebuffer has to be set in a weird order:</p>
<table>
<thead>
<tr>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
<th><!-- --></th>
</tr>
</thead>
<tbody><tr>
<td>pixels</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>…</td>
</tr>
<tr>
<td>address</td>
<td>[2]</td>
<td>[3]</td>
<td>[0]</td>
<td>[1]</td>
<td>[6]</td>
<td>[7]</td>
<td>[4]</td>
<td>[5]</td>
<td>…</td>
</tr>
</tbody></table>
<p>Another annoying thing is that the VSync and HSync bits for the VGA
signal have to go inside every pixel in the framebuffer. To make
things fast, I pre-baked these bits in the image data, which means
that if I want to change to a VGA mode that happens to have different
VSync or HSync polarity, I’ll have to re-convert the images and
recompile everything. Not a big deal, but it’s annoying.</p>
<p>Currently my code only supports placing images aligned horizontally to
4 pixels (i.e., the x coordinate must be a multiple of 4). With that,
the trick of writing 4 pixels at a time, and <em>not</em> clearing the screen
every frame (since I’m going to overwrite everything anyway), I
managed to get around 150 frames per second. We’ll have to see how bad
it gets once I remove the restriction on the horizontal alignment.</p>
<p>All in all, I’m very pleased with the progress.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" data-id="ckmzi1kef0006m1yq3c1y1w4l" data-title="Porting Loser Corps to the ESP32" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ESP32-VGA-output" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/21/ESP32-VGA-output/" class="article-date">
  <time class="dt-published" datetime="2021-02-21T18:48:01.000Z" itemprop="datePublished">2021-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/21/ESP32-VGA-output/">ESP32 VGA output</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Some time ago I made a VGA connector with a simple DAC made of
resistors to use with old FPGA board, but since the board has very
little RAM I wasn’t able to do anything <a target="_blank" rel="noopener" href="https://github.com/moefh/fpga-vga-driver">too
interesting</a> (the DAC shown
there has only 1 bit per color channel, I later made an improved one
with 2 bits per channel).  But as it turns out, some crazy people made
the ESP32 output a VGA signal using I2S – I just tested it and it
seems to work perfectly!</p>
<p>I used <a target="_blank" rel="noopener" href="https://github.com/fdivitto/FabGL">FabGL</a> by Fabrizio Di
Vittorio, but there’s also
<a target="_blank" rel="noopener" href="https://github.com/bitluni/ESP32Lib">ESP32Lib</a> by bitluni which I’ll
probably check out later.  Here’s one of FabGL’s examples in action
(pay no attention to the smudges on the monitor, it’s very old):</p>
<p><img src="/2021/02/21/ESP32-VGA-output/image3.jpg" alt="ESP32 outputting to an old CRT monitor"></p>
<p>Here’s a close-up of the ESP32 showing the connected pins.</p>
<p><img src="/2021/02/21/ESP32-VGA-output/image7.jpg" alt="Showing the connected pins"></p>
<p>I’m using the default FabGL pinout, which is:</p>
<table>
<thead>
<tr>
<th align="right">ESP32 pin</th>
<th>Connection</th>
</tr>
</thead>
<tbody><tr>
<td align="right">23</td>
<td>H Sync</td>
</tr>
<tr>
<td align="right">15</td>
<td>V Sync</td>
</tr>
<tr>
<td align="right">22</td>
<td>Red (high bit)</td>
</tr>
<tr>
<td align="right">21</td>
<td>Red (low bit)</td>
</tr>
<tr>
<td align="right">19</td>
<td>Green (high bit)</td>
</tr>
<tr>
<td align="right">18</td>
<td>Green (low bit)</td>
</tr>
<tr>
<td align="right">5</td>
<td>Blue (high bit)</td>
</tr>
<tr>
<td align="right">4</td>
<td>Blue (low bit)</td>
</tr>
</tbody></table>
<p>And finally, here’s my hacky VGA connector/DAC with 2 bits per color
channel giving a total of 64 colors:</p>
<p><img src="/2021/02/21/ESP32-VGA-output/image6.jpg" alt="My homemade VGA connector/DAC"></p>
<p>The other side of the board is kind of a mess (this was one of my
first soldering jobs), but it works well enough.  And, before you ask,
all of the jumpers are inserted all the way in, but some have longer
leads than others – they’re really crappy jumpers!</p>
<p>I might try to port <a target="_blank" rel="noopener" href="https://github.com/moefh/loser-corps">Loser
Corps</a> to this thing. No idea
how well it will work over Wifi, the network code is <em>very</em> simplistic
and probably doesn’t work well anywhere other than Ethernet. We’ll
see.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/02/21/ESP32-VGA-output/" data-id="ckmzi1kdm0001m1yq4fmx2hep" data-title="ESP32 VGA output" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-STM32-with-pure-assembly" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/15/STM32-with-pure-assembly/" class="article-date">
  <time class="dt-published" datetime="2021-02-15T22:14:52.000Z" itemprop="datePublished">2021-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/15/STM32-with-pure-assembly/">STM32 with pure assembly</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I was finally able to get my hands on an STM32!  This board (sometimes
called “Blue Pill”) is pretty cheap and has a STM32F103C8T6 chip on
it:</p>
<p><img src="/2021/02/15/STM32-with-pure-assembly/image1.jpg" alt="ST-Link programmer connected to the Blue Pill"></p>
<p>The STM32F103C8T6 chip has an ARM Cortex-M3 core, 20KB of SRAM and
64KB of flash.  I have great memories of playing with ARM processors
with the Game Boy Advance (ARM7TDMI) and Nintendo DS (ARM946E-S), so I
decided to try to write some stuff using just assembly.</p>
<p>The whole deal was much easier than I expected. In the Nintendo DS
days I had to compile my own gcc and binutils to be able to build
binaries, and then use a “backup” flash cartridge to run them in the
hardware. Today things are much easier: the “ST-Link” programmer is
very cheap (although what I got is probably a clone), the Arduino IDE
supports STM32 with a simple change in its configuration, and people
make Linux packages for the cross-compiler and other tools (there’s
also the STM32CubeIDE, which is based on Eclipse and is provided by
ST). For my needs, I just had to install <code>binutils-arm-none-eabi</code> and
<code>gcc-arm-none-eabi</code> on Ubuntu and I was well on my way to write some
code.</p>
<p>Now, since I wanted to write pure assembly with no help from any
compiler or library, I needed a linker script, which tells the linker
where each section of the program goes in memory. I searched the web
but couldn’t find anyone who had <em>exactly</em> what I needed: examples
were either for the right chip but other toolchains (there’s an
YouTube video of someone doing this with the STM32CubeMX IDE, which
doesn’t seem to use GNU’s ld?), or they were using the GNU toolchain
but for different STM32 chips. So I ended up mixing and matching (and
confirming things in the STM32F10x user manual) and ended up with
this:</p>
<figure class="highlight plain"><figcaption><span>stm32f103.ld</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* linker script for stm32f103.ld *&#x2F;</span><br><span class="line"></span><br><span class="line">ENTRY(start);</span><br><span class="line"></span><br><span class="line">MEMORY &#123;</span><br><span class="line"> RAM   (rwx) : ORIGIN &#x3D; 0x20000000, LENGTH &#x3D; 20K</span><br><span class="line"> FLASH (rx)  : ORIGIN &#x3D; 0x08000000, LENGTH &#x3D; 64K</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SECTIONS</span><br><span class="line">&#123;</span><br><span class="line">  .text :</span><br><span class="line">  &#123;</span><br><span class="line">    . &#x3D; ALIGN(4);</span><br><span class="line">    *(.isr_vector)  &#x2F;* &lt;-- this has to be at the very start of flash *&#x2F;</span><br><span class="line">    *(.text)</span><br><span class="line">    *(.text*)</span><br><span class="line">    *(.rodata)</span><br><span class="line">    *(.rodata*)</span><br><span class="line">    . &#x3D; ALIGN(4);</span><br><span class="line">  &#125; &gt; FLASH</span><br><span class="line"></span><br><span class="line">  __data_flash &#x3D; .;</span><br><span class="line"></span><br><span class="line">  .data : AT ( __data_flash )</span><br><span class="line">  &#123;</span><br><span class="line">    . &#x3D; ALIGN(4);</span><br><span class="line">    __data_start &#x3D; .;</span><br><span class="line">    *(.data)</span><br><span class="line">    *(.data*)</span><br><span class="line">    . &#x3D; ALIGN(4);</span><br><span class="line">    __data_end &#x3D; .;</span><br><span class="line">  &#125; &gt; RAM</span><br><span class="line"></span><br><span class="line">  .bss :</span><br><span class="line">  &#123;</span><br><span class="line">    __bss_start &#x3D; .;</span><br><span class="line">    *(.bss)</span><br><span class="line">    *(.bss*)</span><br><span class="line">    *(COMMON)</span><br><span class="line">    . &#x3D; ALIGN(4);</span><br><span class="line">    __bss_end &#x3D; .;</span><br><span class="line">  &#125; &gt; RAM</span><br><span class="line"></span><br><span class="line">  __stack_size &#x3D; 1024;</span><br><span class="line">  __stack_end &#x3D; ORIGIN(RAM)+LENGTH(RAM);</span><br><span class="line">  __stack_start &#x3D; __stack_end - __stack_size;</span><br><span class="line">  . &#x3D; __stack_start;</span><br><span class="line">  .stack :</span><br><span class="line">  &#123;</span><br><span class="line">    . &#x3D; . + __stack_size;</span><br><span class="line">  &#125; &gt; RAM</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It has a lot of stuff I don’t need (a lot of these sections are used
by gcc), but I kept them anyway since they don’t hurt and I might want
to use them in the future.</p>
<p>The assembly code needed to set up and control a GPIO pin is pretty
simple, the only thing that stumped me for a bit was not knowing that
the flash memory needs to have an interrupt vector at the very start.
I ended up putting it in its own section, <code>.isr_vector</code>, to make easy
for the linker script to place it exactly at the flash beginning.  The
first entry of the vector is not an interrupt handler, but the address
of the top of the stack region (the stack grows down), and the second
one is the address of the start of the code.  Apparently it really
wants some extra entries there for other handlers; the CPU locks up if
they’re not present (even though I made the handlers themselves into
an infinite loop). I’m not entirely sure what’s going on there, but
adding 6 handlers after the start address seems to keep the CPU happy.</p>
<p>Anyway, here’s the assembly code. In the STM32, everything is
controlled via registers mapped in memory. The code first enables the
clock for the pins on port C (all peripheral clocks start disabled to
save power), then configures pin 13 of port C as output, then sets the
pin state, and then loops forever.</p>
<figure class="highlight armasm"><figcaption><span>main.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">        .cpu cortex-m3</span><br><span class="line">        .syntax unified</span><br><span class="line">        <span class="meta">.thumb</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="comment">@ isr_vector</span></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="meta">.section</span> .isr_vector</span><br><span class="line">        <span class="meta">.word</span> __stack_end</span><br><span class="line">        <span class="meta">.word</span> start</span><br><span class="line">        <span class="meta">.word</span> halt      <span class="comment">@ NMI handler</span></span><br><span class="line">        <span class="meta">.word</span> halt      <span class="comment">@ hard fault</span></span><br><span class="line">        <span class="meta">.word</span> halt      <span class="comment">@ memory fault</span></span><br><span class="line">        <span class="meta">.word</span> halt      <span class="comment">@ bus fault</span></span><br><span class="line">        <span class="meta">.word</span> halt      <span class="comment">@ usage fault</span></span><br><span class="line"></span><br><span class="line">        <span class="meta">.text</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="comment">@ start</span></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="meta">.global</span> start</span><br><span class="line">        <span class="meta">.thumb_func</span></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">@ enable clock for port C pins</span></span><br><span class="line">        <span class="keyword">ldr</span> <span class="built_in">r0</span>, <span class="number">=0x10</span>             <span class="comment">@ bit 4 = port C enable</span></span><br><span class="line">        <span class="keyword">ldr</span> <span class="built_in">r1</span>, <span class="number">=0x40021000</span>       <span class="comment">@ RCC base address</span></span><br><span class="line">        <span class="keyword">str</span> <span class="built_in">r0</span>, [<span class="built_in">r1</span>, <span class="number">#0x18</span>]       <span class="comment">@ 0x18 = reg for APB2 enable (where port C lives)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">@ configure port C pin 13 as output</span></span><br><span class="line">        <span class="keyword">ldr</span> <span class="built_in">r0</span>, <span class="number">=0x44244444</span>       <span class="comment">@ set pin 13 as output, other 7 pins stay as input</span></span><br><span class="line">        <span class="keyword">ldr</span> <span class="built_in">r1</span>, <span class="number">=0x40011000</span>       <span class="comment">@ port C base address</span></span><br><span class="line">        <span class="keyword">str</span> <span class="built_in">r0</span>, [<span class="built_in">r1</span>, <span class="number">#0x04</span>]       <span class="comment">@ 0x04 = reg for config of 8 higher pins of port</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">@ set port C pin 13 to high (commented) or low</span></span><br><span class="line">        <span class="comment">@ldr r0, =0x2000          @ pin 13 high (0x2000 = 1&lt;&lt;13)</span></span><br><span class="line">        <span class="keyword">ldr</span> <span class="built_in">r0</span>, <span class="number">=0</span>                <span class="comment">@ pin 13 low</span></span><br><span class="line">        <span class="keyword">str</span> <span class="built_in">r0</span>, [<span class="built_in">r1</span>, <span class="number">#0x0c</span>]       <span class="comment">@ 0x0c = reg for output data of port pins</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">start_loop:</span></span><br><span class="line">        <span class="keyword">b</span> start_loop</span><br><span class="line"></span><br><span class="line"><span class="symbol">start_end:</span></span><br><span class="line">        .pool</span><br><span class="line"></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="comment">@ halt</span></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="meta">.thumb_func</span></span><br><span class="line"><span class="symbol">halt:</span></span><br><span class="line">        <span class="keyword">b</span> halt</span><br><span class="line"></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="comment">@ DATA section</span></span><br><span class="line">        <span class="comment">@ (not used, added here just to check that</span></span><br><span class="line">        <span class="comment">@ the linker script is working)</span></span><br><span class="line">        <span class="comment">@ ======================================</span></span><br><span class="line">        <span class="meta">.section</span> <span class="meta">.data</span></span><br><span class="line">        <span class="meta">.ascii</span> <span class="string">&quot;Hello, world!\0&quot;</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>
<p>The board has an LED connected to pin 13 of port C; it seems that the
LED’s cathode is connected to the pin (with the anode connected to
+Vdd) because the LED turns on when the pin is brought low.</p>
<p>This code works, but if I ever want to use the stuff in the <code>.data</code>
section, I’ll have to copy it from the flash memory to RAM.  The
linker script is prepared for that: it defines the symbol
<code>__data_flash</code> to the address of the very end of the <code>.text</code> section,
which is the start of where the <code>.data</code> section stuff is located in
the flash memory.  So I’ll just have to make a <code>memcpy</code> function that
copies <code>__data_end-__data_start</code> bytes from <code>__data_flash</code> to
<code>__data_start</code> (which is the address of the <code>.data</code> section in RAM).</p>
<p>After assembling the code with <code>arm-none-eabi-as</code> and linking it with
<code>arm-none-eabi-ld</code>, I used <code>arm-none-eabi-objcopy</code> to convert the ELF
executable to a stripped out binary suitable to write to flash. These
are the commands that <code>make</code> runs:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arm-none-eabi-as -o main.o main.s</span><br><span class="line">arm-none-eabi-ld -Tstm32f103.ld -o main.elf main.o</span><br><span class="line">arm-none-eabi-objcopy -O binary main.elf main.bin</span><br></pre></td></tr></table></figure>
<p>And, finally, to upload the final binary to the flash in the chip I
ended up using the Windows STLink command line utility that the
Arduino IDE installs when you install the STM32 boards. I think it’s
the same tool that can be downloaded from the STM32 website (which
comes with a GUI besides the command line tool), but I haven’t
checked.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/02/15/STM32-with-pure-assembly/" data-id="ckmzi1kfl0010m1yq7sm07d68" data-title="STM32 with pure assembly" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arm/" rel="tag">arm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/assembly/" rel="tag">assembly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stm32/" rel="tag">stm32</a></li></ul>

    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/" rel="tag">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/assembly/" rel="tag">assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/joystick/" rel="tag">joystick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/perfboard/" rel="tag">perfboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stm32/" rel="tag">stm32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vga/" rel="tag">vga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiimote/" rel="tag">wiimote</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/assembly/" style="font-size: 10px;">assembly</a> <a href="/tags/esp32/" style="font-size: 20px;">esp32</a> <a href="/tags/joystick/" style="font-size: 10px;">joystick</a> <a href="/tags/loser-corps/" style="font-size: 15px;">loser-corps</a> <a href="/tags/perfboard/" style="font-size: 10px;">perfboard</a> <a href="/tags/stm32/" style="font-size: 10px;">stm32</a> <a href="/tags/vga/" style="font-size: 20px;">vga</a> <a href="/tags/wiimote/" style="font-size: 10px;">wiimote</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/02/Homemade-ESP32-VGA-Boards/">Homemade ESP32 VGA Boards</a>
          </li>
        
          <li>
            <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/">Porting Loser Corps to the ESP32 - Part 3</a>
          </li>
        
          <li>
            <a href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/">Porting Loser Corps to the ESP32 - Part 2</a>
          </li>
        
          <li>
            <a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/">Porting Loser Corps to the ESP32</a>
          </li>
        
          <li>
            <a href="/2021/02/21/ESP32-VGA-output/">ESP32 VGA output</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 MoeFH<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>