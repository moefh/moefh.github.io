<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Porting Loser Corps to the ESP32 - Part 2 | MoeFH&#39;s Electronic Adventures</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="I made some progress in porting Loser Corps to the ESP32 (here&#39;s part 1 of the saga). Here’s a demo video (click to open Youtube):  (This video shows a slightly older version where collision detec">
<meta property="og:type" content="article">
<meta property="og:title" content="Porting Loser Corps to the ESP32 - Part 2">
<meta property="og:url" content="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/index.html">
<meta property="og:site_name" content="MoeFH&#39;s Electronic Adventures">
<meta property="og:description" content="I made some progress in porting Loser Corps to the ESP32 (here&#39;s part 1 of the saga). Here’s a demo video (click to open Youtube):  (This video shows a slightly older version where collision detec">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser1.jpg">
<meta property="og:image" content="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser3.jpg">
<meta property="article:published_time" content="2021-03-07T20:02:26.000Z">
<meta property="article:modified_time" content="2021-03-10T01:16:11.361Z">
<meta property="article:author" content="MoeFH">
<meta property="article:tag" content="esp32">
<meta property="article:tag" content="vga">
<meta property="article:tag" content="loser-corps">
<meta property="article:tag" content="joystick">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="MoeFH's Electronic Adventures" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MoeFH&#39;s Electronic Adventures</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moefh.gihub.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Porting-Loser-Corps-to-the-ESP32-Part-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/" class="article-date">
  <time class="dt-published" datetime="2021-03-07T20:02:26.000Z" itemprop="datePublished">2021-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Porting Loser Corps to the ESP32 - Part 2
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I made some progress in porting Loser Corps to the ESP32 (<a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" title="here&#39;s part 1">here&#39;s part 1</a> of the saga).</p>
<p>Here’s a demo video (click to open Youtube):</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=BvJ3HLKo6p4"><img src="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser1.jpg" alt="Youtube video"></a></p>
<p>(This video shows a slightly older version where collision detection
was done with the image rectangle, not the character’s clipping
rectangle, which is why it looks a little wonky in a few places.)</p>
<p>As the video shows, you can control a character (Loserboy) in a map,
walking and jumping to your heart’s content. I reworked some parts of
the movement code, but it feels a lot like the original, although I
think the jump is not high enough. The collision detection code is
pretty much untouched, except for what I absolutely had to do to make
it run in the ESP32, which wasn’t much.</p>
<p>The joystick I’m using is a common Arduino joystick shield. It’s
pretty cheap and easy to use, but it requires one input pin of the
ESP32 for each button, and one analog input pin for each direction of
the stick – it’s really just a bunch of of buttons and potentiometers
conveniently placed on a PCB:</p>
<p><img src="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/loser3.jpg" alt="The Arduino joystick shield I&#39;m using"></p>
<p>Don’t be fooled by the 3V3/5V switch, it’s there just so you can plug
it directly to an Arduino Uno board – it just selects which of the
two voltage pins in the Arduino the buttons will close the contact to.</p>
<p>I’ve connected all buttons pins, but the code only uses the C button
to jump and the X analog stick to move.</p>
<p>I’ve tried to use a Wiimote nunchuck and a Wiimote classic controller,
but I didn’t have much success.  These controllers use an I2C
interface to talk to the Wiimote, so it seems like they should be easy
to use with the ESP32 – and it works, but it’s very unreliable. The
controller stops replying for no apparent reason, a lot of times
requiring an unplug/replug to start working again. I’ve tried it with no
pullup resistors, 5K pullups and and 10K pullups, with no luck. The
strangest thing is that it works perfectly with an Arduino Uno (using
the same exact test code), even with no pullup resistors.  I read
people saying that the I2C part of the ESP32 Arduino library isn’t
that great, so maybe that’s the problem?</p>
<p>Another nice option would be to use the Wiimote itself, which uses
Bluetooth. That’s probably the next thing I’ll work on in this
project.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.gihub.io/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/" data-id="ckmsi27j30002g0yqa0pb7pnd" data-title="Porting Loser Corps to the ESP32 - Part 2" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/joystick/" rel="tag">joystick</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vga/" rel="tag">vga</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Porting Loser Corps to the ESP32 - Part 3
        
      </div>
    </a>
  
  
    <a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Porting Loser Corps to the ESP32</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/" rel="tag">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/assembly/" rel="tag">assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/joystick/" rel="tag">joystick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stm32/" rel="tag">stm32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vga/" rel="tag">vga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiimote/" rel="tag">wiimote</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/assembly/" style="font-size: 10px;">assembly</a> <a href="/tags/esp32/" style="font-size: 20px;">esp32</a> <a href="/tags/joystick/" style="font-size: 10px;">joystick</a> <a href="/tags/loser-corps/" style="font-size: 15px;">loser-corps</a> <a href="/tags/stm32/" style="font-size: 10px;">stm32</a> <a href="/tags/vga/" style="font-size: 20px;">vga</a> <a href="/tags/wiimote/" style="font-size: 10px;">wiimote</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/">Porting Loser Corps to the ESP32 - Part 3</a>
          </li>
        
          <li>
            <a href="/2021/03/07/Porting-Loser-Corps-to-the-ESP32-Part-2/">Porting Loser Corps to the ESP32 - Part 2</a>
          </li>
        
          <li>
            <a href="/2021/02/28/Porting-Loser-Corps-to-the-ESP32/">Porting Loser Corps to the ESP32</a>
          </li>
        
          <li>
            <a href="/2021/02/21/ESP32-VGA-output/">ESP32 VGA output</a>
          </li>
        
          <li>
            <a href="/2021/02/15/STM32-with-pure-assembly/">STM32 with pure assembly</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 MoeFH<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>