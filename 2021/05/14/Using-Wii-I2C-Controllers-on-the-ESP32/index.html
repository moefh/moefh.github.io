<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Using Wii I2C Controllers on the ESP32 | moefh.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="I wrote a very simple library to make the ESP32 talk via I2C to the the Wii controllers (like the Wii Nunchuk and the Wii Classic Controller). There are a few libraries around that do this for the Ard">
<meta property="og:type" content="article">
<meta property="og:title" content="Using Wii I2C Controllers on the ESP32">
<meta property="og:url" content="http://moefh.github.io/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/index.html">
<meta property="og:site_name" content="moefh.github.io">
<meta property="og:description" content="I wrote a very simple library to make the ESP32 talk via I2C to the the Wii controllers (like the Wii Nunchuk and the Wii Classic Controller). There are a few libraries around that do this for the Ard">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://moefh.github.io/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/photo.jpg">
<meta property="article:published_time" content="2021-05-15T00:38:48.000Z">
<meta property="article:modified_time" content="2021-05-13T19:51:57.165Z">
<meta property="article:author" content="MoeFH">
<meta property="article:tag" content="esp32">
<meta property="article:tag" content="i2c">
<meta property="article:tag" content="wii">
<meta property="article:tag" content="nunchuk">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://moefh.github.io/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/photo.jpg">
  
    <link rel="alternate" href="/atom.xml" title="moefh.github.io" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">moefh.github.io</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">The Magic Smoke Has Left the Building</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moefh.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Using-Wii-I2C-Controllers-on-the-ESP32" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/" class="article-date">
  <time class="dt-published" datetime="2021-05-15T00:38:48.000Z" itemprop="datePublished">2021-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Using Wii I2C Controllers on the ESP32
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I wrote a very simple library to make the ESP32 talk via I2C to the
the Wii controllers (like the Wii Nunchuk and the Wii Classic
Controller).</p>
<p>There are a few libraries around that do this for the Arduino using
the <a target="_blank" rel="noopener" href="https://www.arduino.cc/en/reference/wire"><code>Wire</code> library</a>, but
for some reason that doesn’t work consistently with the ESP32 and the
Wii controllers.  So I wrote the I2C communication using the <a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/i2c.html">ESP-IDF
API</a>,
and it works really well, except that for some reason I wasn’t able to
make it work at 400KHz (which is supposedly what the Wii controllers
accept), only at 100KHz.  That’s a little disappointing, but good
enough for my purposes, which is using the controllers in the ESP32
port of Loser Corps.</p>
<p>While playing with it, I wrote a little test program to display the
state of the connected controller on a small OLED screen (SSD1306),
which is controlled using the <a target="_blank" rel="noopener" href="https://github.com/adafruit/Adafruit_SSD1306">Adafruit SSD1306
library</a> also via I2C,
but using the <code>Wire</code> library:</p>
<p><img src="/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/photo.jpg" alt="Testing the Wii Classic Controler"></p>
<p>When using the Wii Classic Controller, the screen shows two triangles
that point on the direction where you move the sticks, growing in size
as you move the stick farther along.  Pressing each button lights a
different character on the screen, and the analog triggers control the
size of bars that appear on the left side.</p>
<p>When using the Wii Nunchuk, the screen shows a single triangle with
the status of the nunchuk stick and three bars to the left that show
the status of the X, Y and Z accelerometer readings.  Pressing C or Z
displays the corresponding letter on the screen.</p>
<p>I wrote this small test program mostly for fun, but it tests something
important: that my library, which uses I2C via ESP-IDF, can coexist
with <code>Wire</code> library.  When using them together, you just have to be
careful not to use the same ESP32 I2C port with the two libraries at
the same time.  In this program, my library uses I2C port 0 and the
<code>Wire</code> library uses I2C port 1 (by using the <code>Wire1</code> object).</p>
<p>The source code for the library is here:
<a target="_blank" rel="noopener" href="https://github.com/moefh/esp32-wii-nunchuk">https://github.com/moefh/esp32-wii-nunchuk</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moefh.github.io/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/" data-id="ckom9hqy30001j4yqgvcd7fs7" data-title="Using Wii I2C Controllers on the ESP32" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/i2c/" rel="tag">i2c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nunchuk/" rel="tag">nunchuk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wii/" rel="tag">wii</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/04/17/Porting-Loser-Corps-to-the-ESP32-Part-5/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Porting Loser Corps to the ESP32 - Part 5</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/" rel="tag">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/assembly/" rel="tag">assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i2c/" rel="tag">i2c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/joystick/" rel="tag">joystick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loser-corps/" rel="tag">loser-corps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nunchuk/" rel="tag">nunchuk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/perfboard/" rel="tag">perfboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stm32/" rel="tag">stm32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vga/" rel="tag">vga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wii/" rel="tag">wii</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiimote/" rel="tag">wiimote</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/assembly/" style="font-size: 10px;">assembly</a> <a href="/tags/esp32/" style="font-size: 20px;">esp32</a> <a href="/tags/i2c/" style="font-size: 10px;">i2c</a> <a href="/tags/joystick/" style="font-size: 10px;">joystick</a> <a href="/tags/loser-corps/" style="font-size: 13.33px;">loser-corps</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/nunchuk/" style="font-size: 10px;">nunchuk</a> <a href="/tags/perfboard/" style="font-size: 10px;">perfboard</a> <a href="/tags/stm32/" style="font-size: 10px;">stm32</a> <a href="/tags/vga/" style="font-size: 16.67px;">vga</a> <a href="/tags/wii/" style="font-size: 10px;">wii</a> <a href="/tags/wiimote/" style="font-size: 10px;">wiimote</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/14/Using-Wii-I2C-Controllers-on-the-ESP32/">Using Wii I2C Controllers on the ESP32</a>
          </li>
        
          <li>
            <a href="/2021/04/17/Porting-Loser-Corps-to-the-ESP32-Part-5/">Porting Loser Corps to the ESP32 - Part 5</a>
          </li>
        
          <li>
            <a href="/2021/04/04/Porting-Loser-Corps-to-the-ESP32-Part-4/">Porting Loser Corps to the ESP32 - Part 4</a>
          </li>
        
          <li>
            <a href="/2021/04/02/Homemade-ESP32-VGA-Boards/">Homemade ESP32 VGA Boards</a>
          </li>
        
          <li>
            <a href="/2021/03/27/Porting-Loser-Corps-to-the-ESP32-Part-3/">Porting Loser Corps to the ESP32 - Part 3</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 MoeFH<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>